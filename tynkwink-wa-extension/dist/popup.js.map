{
  "version": 3,
  "sources": ["../src/popup/popup.ts"],
  "sourcesContent": ["import type { AuthState } from \"../common/types\";\n\nconst statusEl = document.getElementById(\"status\") as HTMLDivElement;\nconst openWaBtn = document.getElementById(\"open-wa\") as HTMLButtonElement;\nconst clearBtn = document.getElementById(\"clear\") as HTMLButtonElement;\nconst apiBaseInput = document.getElementById(\"api-base\") as HTMLInputElement;\nconst saveApiBtn = document.getElementById(\"save-api\") as HTMLButtonElement;\nlet currentAuth: AuthState | null = null;\n\nasync function load() {\n  const res = await chrome.runtime.sendMessage({ type: \"AUTH_GET\" });\n  if (!res?.ok) {\n    statusEl.textContent = `Error loading auth: ${res?.error || \"unknown\"}`;\n    return;\n  }\n\n  const auth = res.auth as AuthState;\n  currentAuth = auth;\n  apiBaseInput.value = auth.apiBase ?? \"\";\n  statusEl.textContent = auth.token ? \"CRM credentials loaded.\" : \"Not logged in yet.\";\n}\n\nopenWaBtn.onclick = () => {\n  chrome.tabs.create({ url: \"https://web.whatsapp.com\" });\n};\n\nclearBtn.onclick = async () => {\n  statusEl.textContent = \"Clearing saved credentials...\";\n  const auth: AuthState = { apiBase: null, tenantId: null, token: null };\n  const res = await chrome.runtime.sendMessage({ type: \"AUTH_SAVE\", auth });\n  statusEl.textContent = res?.ok ? \"Cleared.\" : `Clear failed: ${res?.error || \"unknown\"}`;\n  if (res?.ok) {\n    currentAuth = auth;\n    apiBaseInput.value = \"\";\n  }\n};\n\nsaveApiBtn.onclick = async () => {\n  statusEl.textContent = \"Saving API Base URL...\";\n  const nextApiBase = apiBaseInput.value.trim() || null;\n  const shouldClearToken = currentAuth?.apiBase !== nextApiBase;\n  const auth: AuthState = {\n    apiBase: nextApiBase,\n    tenantId: shouldClearToken ? null : currentAuth?.tenantId ?? null,\n    token: shouldClearToken ? null : currentAuth?.token ?? null\n  };\n  const res = await chrome.runtime.sendMessage({ type: \"AUTH_SAVE\", auth });\n  statusEl.textContent = res?.ok ? \"API Base URL saved.\" : `Save failed: ${res?.error || \"unknown\"}`;\n  if (res?.ok) {\n    currentAuth = auth;\n  }\n};\n\nload();\n"],
  "mappings": ";AAEA,IAAM,WAAW,SAAS,eAAe,QAAQ;AACjD,IAAM,YAAY,SAAS,eAAe,SAAS;AACnD,IAAM,WAAW,SAAS,eAAe,OAAO;AAChD,IAAM,eAAe,SAAS,eAAe,UAAU;AACvD,IAAM,aAAa,SAAS,eAAe,UAAU;AACrD,IAAI,cAAgC;AAEpC,eAAe,OAAO;AACpB,QAAM,MAAM,MAAM,OAAO,QAAQ,YAAY,EAAE,MAAM,WAAW,CAAC;AACjE,MAAI,CAAC,KAAK,IAAI;AACZ,aAAS,cAAc,uBAAuB,KAAK,SAAS,SAAS;AACrE;AAAA,EACF;AAEA,QAAM,OAAO,IAAI;AACjB,gBAAc;AACd,eAAa,QAAQ,KAAK,WAAW;AACrC,WAAS,cAAc,KAAK,QAAQ,4BAA4B;AAClE;AAEA,UAAU,UAAU,MAAM;AACxB,SAAO,KAAK,OAAO,EAAE,KAAK,2BAA2B,CAAC;AACxD;AAEA,SAAS,UAAU,YAAY;AAC7B,WAAS,cAAc;AACvB,QAAM,OAAkB,EAAE,SAAS,MAAM,UAAU,MAAM,OAAO,KAAK;AACrE,QAAM,MAAM,MAAM,OAAO,QAAQ,YAAY,EAAE,MAAM,aAAa,KAAK,CAAC;AACxE,WAAS,cAAc,KAAK,KAAK,aAAa,iBAAiB,KAAK,SAAS,SAAS;AACtF,MAAI,KAAK,IAAI;AACX,kBAAc;AACd,iBAAa,QAAQ;AAAA,EACvB;AACF;AAEA,WAAW,UAAU,YAAY;AAC/B,WAAS,cAAc;AACvB,QAAM,cAAc,aAAa,MAAM,KAAK,KAAK;AACjD,QAAM,mBAAmB,aAAa,YAAY;AAClD,QAAM,OAAkB;AAAA,IACtB,SAAS;AAAA,IACT,UAAU,mBAAmB,OAAO,aAAa,YAAY;AAAA,IAC7D,OAAO,mBAAmB,OAAO,aAAa,SAAS;AAAA,EACzD;AACA,QAAM,MAAM,MAAM,OAAO,QAAQ,YAAY,EAAE,MAAM,aAAa,KAAK,CAAC;AACxE,WAAS,cAAc,KAAK,KAAK,wBAAwB,gBAAgB,KAAK,SAAS,SAAS;AAChG,MAAI,KAAK,IAAI;AACX,kBAAc;AAAA,EAChB;AACF;AAEA,KAAK;",
  "names": []
}
